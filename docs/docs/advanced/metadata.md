# Metadata Documentation

This document describes the various files a TableVault repository generates to track table metadata. While users should never modify these files, they offer valuable insight into the repository's underlying state. This page details each file type and its contents.

---

## General Metadata

---

### `metadata/logs.txt` and `metadata/log_ids.txt`

These files contain information about completed logs. `logs.txt` provides the full details, while `log_ids.txt` only contains the `process_id`.

---

### `metadata/active_logs.json`
This file contains information about all currently active processes. This data can be directly queried using the TableVault API.

---

### `metadata/tables_history.json` and `metadata/columns_history.json`

These files contain a record of all fully stored instances. For each instance, `tables_history.json` records:

- When the dataframe was first materialized (which may have been copied from a previous dataframe).
- When the instance was first materialized.
- When the instance ceased to be active.

`columns_history.json` records the same information at a per-column level. Both files are used internally for various functionalities and optimizations.

---

### `locks/*`

TableVault uses file-based, custom read-write locks to enable multi-processing.

---

### `_temp/*`

During active operations, the previous state of files that could be overwritten is saved here. If an operation fails, this allows the repository's state to be safely restored.

---

### `metadata/ARCHIVED_TRASH/*`

When tables and instances are deleted, only their dataframes and artifacts are removed. All associated metadata is moved to this folder, allowing for future reference to the history of how tables were constructed.

!!! note
    If storage space is critical, the files in this folder can be safely deleted. However, it is unlikely that these files will consume a significant amount of space.

---

### `lock.LOCK` file

This locking file ensures that only one process can write to the metadata at a time.

---

## Table and Instance Metadata

---

### `descriptions.yaml`

Each `Table` and `Instance` object has a corresponding YAML description file for its specific metadata. While some metadata is autogenerated, users can also add optional information when creating these objects. This feature is intended to provide any useful, missing context.

---

### `dtypes.json`

Each materialized `Instance` dataframe includes a `dtypes.json` file that specifies the data type of each column. This file is useful for handling custom data types and for keeping track of `artifact_string` columns.

---

### `EXECUTION_ARCHIVE/*` folder

Each executed `Instance` has an `EXECUTION_ARCHIVE` folder that explicitly records the Python functions that were executed. This folder, along with the `Builders` files, helps provide context for each folder.